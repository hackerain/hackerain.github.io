<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>TripleO UnderCloud 安装原理 - 开心BOY</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="开心BOY"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="开心BOY"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="本节介绍UnderCloud的安装原理，UnderCloud主要是依赖于OpenStack本身的功能来安装OverCloud，OverCloud就是最终要交付的OpenStack环境。UnderCloud是一个单机版的OpenStack环境，主要安装的组件有nova, glance, keystone, neutron, heat, ironic, swift，还可以选择性的安装telemetry"><meta property="og:type" content="blog"><meta property="og:title" content="TripleO UnderCloud 安装原理"><meta property="og:url" content="https://hackerain.me/2017/03/09/openstack/tripleo/undercloud.html"><meta property="og:site_name" content="开心BOY"><meta property="og:description" content="本节介绍UnderCloud的安装原理，UnderCloud主要是依赖于OpenStack本身的功能来安装OverCloud，OverCloud就是最终要交付的OpenStack环境。UnderCloud是一个单机版的OpenStack环境，主要安装的组件有nova, glance, keystone, neutron, heat, ironic, swift，还可以选择性的安装telemetry"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://hackerain.me/assets/tripleo-undercloud-topology2.png"><meta property="article:published_time" content="2017-03-09T01:56:55.000Z"><meta property="article:modified_time" content="2023-03-11T15:45:44.746Z"><meta property="article:author" content="hackerain"><meta property="article:tag" content="openstack"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://hackerain.me/assets/tripleo-undercloud-topology2.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hackerain.me/2017/03/09/openstack/tripleo/undercloud.html"},"headline":"TripleO UnderCloud 安装原理","image":["https://hackerain.me/assets/tripleo-undercloud-topology2.png"],"datePublished":"2017-03-09T01:56:55.000Z","dateModified":"2023-03-11T15:45:44.746Z","author":{"@type":"Person","name":"hackerain"},"publisher":{"@type":"Organization","name":"开心BOY","logo":{"@type":"ImageObject","url":"https://hackerain.me/assets/logo.jpg"}},"description":"本节介绍UnderCloud的安装原理，UnderCloud主要是依赖于OpenStack本身的功能来安装OverCloud，OverCloud就是最终要交付的OpenStack环境。UnderCloud是一个单机版的OpenStack环境，主要安装的组件有nova, glance, keystone, neutron, heat, ironic, swift，还可以选择性的安装telemetry"}</script><link rel="canonical" href="https://hackerain.me/2017/03/09/openstack/tripleo/undercloud.html"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="开心BOY" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/assets/logo.jpg" alt="开心BOY" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2017-03-09T01:56:55.000Z" title="3/9/2017, 1:56:55 AM">2017-03-09</time>发表</span><span class="level-item"><time dateTime="2023-03-11T15:45:44.746Z" title="3/11/2023, 3:45:44 PM">2023-03-11</time>更新</span><span class="level-item">23 分钟读完 (大约3496个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">TripleO UnderCloud 安装原理</h1><div class="content"><p>本节介绍UnderCloud的安装原理，UnderCloud主要是依赖于OpenStack本身的功能来安装OverCloud，OverCloud就是最终要交付的OpenStack环境。UnderCloud是一个单机版的OpenStack环境，主要安装的组件有nova, glance, keystone, neutron, heat, ironic, swift，还可以选择性的安装telemetry, mistral, zaqar等组件。</p>
<span id="more"></span>

<p>安装undercloud只使用一个简单的命令: <code>openstack undercloud install</code>就可以了，这个命令是python-tripleoclient提供的，它是python-openstackclient的一个插件，除了有安装undercloud的命令外，还有安装overcloud的命令，而在安装undercloud时，python-tripleoclient只是简单的调用了instack-undercloud中提供的命令: <code>instack-install-undercloud</code>，instack-undercloud就是专门用来安装和升级undercloud的，在instack-undercloud中，又使用了 instack + os-refresh-config + puppet来部署undercloud，所以这些组件的依赖关系如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">└── python-openstackclient</span><br><span class="line">    └── python-tripleoclient</span><br><span class="line">        └── instack-undercloud</span><br><span class="line">            ├── instack</span><br><span class="line">            └── os-refresh-config</span><br><span class="line">                ├── os-apply-config</span><br><span class="line">                ├── puppet</span><br><span class="line">                └── os-cloud-config</span><br></pre></td></tr></table></figure>

<p>instack和os-refresh-config的具体细节请参见本章“依赖组件”一节中的内容，instack里主要应用了dib elements来定制当前系统，在instack-undercloud中，指定了多个elements来执行，主要是为后面安装undercloud做些准备工作，比如生成os-refresh-config需要的脚本，生成hieradata等等；而os-refresh-config则在安装undercloud过程中起到了整体的<strong>编排</strong>作用，它会去调用os-apply-config配置当前系统，跑puppet安装OpenStack组件，然后建立安装overcloud使用的网络等等；puppet是在os-refresh-config过程中被执行的，使用puppet apply在本地执行puppet代码，安装undercloud用到的各个OpenStack组件；在安装完成OpenStack各个组件后，os-refresh-config会去调用os-cloud-config提供的命令setup-neutron去建立管理网络。</p>
<p>下面来详细介绍下instack-undercloud安装undercloud中的主要步骤：</p>
<h3 id="1-生成环境变量"><a href="#1-生成环境变量" class="headerlink" title="1. 生成环境变量"></a>1. 生成环境变量</h3><p>在安装undercloud之前，先要在stack用户的home目录下创建一个undercloud.conf配置文件，在该文件中定义了安装undercloud需要用的配置项，因为在安装时，本质上是在跑各种脚本，在脚本中会用到各种变量，这些变量的值需要从环境变量中获取，因此instack-install-undercloud命令先要将读取undercloud.conf中的配置项，然后将其转化为环境变量，方便后面的脚本使用，当然，脚本使用的环境变量不仅仅是在这个阶段生成的，在各个elements中，也定义了各种环境变量，在执行elemenets之前，会先被导出来。在安装undercloud时，生成的环境变量见附录1.</p>
<h3 id="2-生成Metadata配置文件"><a href="#2-生成Metadata配置文件" class="headerlink" title="2. 生成Metadata配置文件"></a>2. 生成Metadata配置文件</h3><p>在后面的步骤中会执行os-apply-config，os-apply-config需要用到一个json格式的metadata配置文件，用来渲染模板，生成系统中的配置，这个json格式的metadata配置文件就是在这个阶段生成的，里面包括了hieradata的配置，neutron的配置，os-net-config的配置等等，该文件的保存路径为：<code>/var/lib/heat-cfntools/cfn-init-data</code>，可能是由于历史原因，是以cfn命名的，这也是os-apply-config最低优先级去找的配置文件，该文件的示例请参见附录2.</p>
<h3 id="3-执行instack"><a href="#3-执行instack" class="headerlink" title="3. 执行instack"></a>3. 执行instack</h3><p>在instack-undercloud中指定了一些elements去执行，这些elements分别来自不同的项目，有tripleo-image-elements中定义的，有instack-undercloud中定义的，还有diskimage-builder中定义的，这些信息都被配置在一个json格式的配置文件中，执行的命令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo -E instack \</span><br><span class="line">    -p /usr/share/tripleo-puppet-elements:/usr/share/instack-undercloud:/usr/share/tripleo-image-elements:/usr/share/diskimage-builder/elements \</span><br><span class="line">    -j /usr/share/instack-undercloud/json-files/centos-7-undercloud-packages.json</span><br></pre></td></tr></table></figure>

<p>centos-7-undercloud-packages.json文件的内容如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">  &#123;</span><br><span class="line">    &quot;name&quot;: &quot;Installation&quot;,</span><br><span class="line">    &quot;element&quot;: [</span><br><span class="line">      &quot;install-types&quot;,</span><br><span class="line">      &quot;undercloud-install&quot;,</span><br><span class="line">      &quot;enable-packages-install&quot;,</span><br><span class="line">      &quot;element-manifest&quot;,</span><br><span class="line">      &quot;puppet-stack-config&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;hook&quot;: [</span><br><span class="line">      &quot;extra-data&quot;,</span><br><span class="line">      &quot;pre-install&quot;,</span><br><span class="line">      &quot;install&quot;,</span><br><span class="line">      &quot;post-install&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;exclude-element&quot;: [</span><br><span class="line">      &quot;pip-and-virtualenv&quot;,</span><br><span class="line">      &quot;os-collect-config&quot;,</span><br><span class="line">      &quot;svc-map&quot;,</span><br><span class="line">      &quot;pip-manifest&quot;,</span><br><span class="line">      &quot;package-installs&quot;,</span><br><span class="line">      &quot;pkg-map&quot;,</span><br><span class="line">      &quot;puppet&quot;,</span><br><span class="line">      &quot;cache-url&quot;,</span><br><span class="line">      &quot;dib-python&quot;,</span><br><span class="line">      &quot;os-svc-install&quot;,</span><br><span class="line">      &quot;install-bin&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;blacklist&quot;: [</span><br><span class="line">      &quot;99-refresh-completed&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>即指定了instack-types, undercloud-install, enable-packages-install, element-manifest, puppet-stack-config这几个elements，因为每一个elements都有依赖，所以最终处理完依赖，要执行的elements全量为：</p>
<ul>
<li>install-types</li>
<li>element-manifest</li>
<li>manifests</li>
<li>source-repositories</li>
<li>puppet-modules</li>
<li>hiera</li>
<li>enable-packages-install</li>
<li>os-apply-config</li>
<li>os-refresh-config</li>
<li>undercloud-install</li>
<li>puppet-stack-config</li>
</ul>
<p>每一个elements都包含了一些hook，instack的配置文件指定了只执行extra-data, pre-install, install, post-install这4个hook，这些hook以及hook中的脚本请参见附录3，合并之后的hook请参见附录4。</p>
<p>instack通过执行这些elements，大概做了几下几件事情：</p>
<ol>
<li>从package安装各个项目的puppet代码，因为还支持从源码安装puppet代码</li>
<li>生成puppet的入口代码：puppet-stack-config.pp，以及生成puppet hieradata：puppet-stack-config.yaml</li>
<li>生成os-apply-config使用的模板文件</li>
<li>生成os-refresh-config使用的脚本</li>
</ol>
<h3 id="4-执行os-refresh-config"><a href="#4-执行os-refresh-config" class="headerlink" title="4. 执行os-refresh-config"></a>4. 执行os-refresh-config</h3><p>在上一步中已经生成了os-refresh-config所需要使用的脚本，是通过os-refresh-config这个element生成的，这些脚本分散在每一个element中，每一个element除了包含instack执行过程中的hook外，还包含了os-refresh-config和os-apply-config需要用到的hook，通过os-refresh-config和os-apply-config这两个elements将这些hook合并到一起，如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">▾ os-apply-config/</span><br><span class="line">  ▾ etc/</span><br><span class="line">    ▾ os-net-config/</span><br><span class="line">        config.json</span><br><span class="line">    ▾ puppet/</span><br><span class="line">      ▾ hieradata/</span><br><span class="line">          CentOS.yaml</span><br><span class="line">          RedHat.yaml</span><br><span class="line">        hiera.yaml</span><br><span class="line">  ▾ root/</span><br><span class="line">      stackrc</span><br><span class="line">      stackrc.oac</span><br><span class="line">      tripleo-undercloud-passwords</span><br><span class="line">      tripleo-undercloud-passwords.oac</span><br><span class="line">  ▾ var/</span><br><span class="line">    ▾ opt/</span><br><span class="line">      ▾ undercloud-stack/</span><br><span class="line">          masquerade</span><br><span class="line">▾ os-refresh-config/</span><br><span class="line">  ▾ configure.d/</span><br><span class="line">      20-os-apply-config*</span><br><span class="line">      30-reload-keepalived*</span><br><span class="line">      40-hiera-datafiles*</span><br><span class="line">      40-truncate-nova-config*</span><br><span class="line">      50-puppet-stack-config*</span><br><span class="line">  ▾ post-configure.d/</span><br><span class="line">      10-iptables*</span><br><span class="line">      80-seedstack-masquerade*</span><br><span class="line">      98-undercloud-setup*</span><br><span class="line">      99-refresh-completed*</span><br></pre></td></tr></table></figure>

<p>在生成的os-refresh-config中，只包含了configure和post-configure两个hook，因此先执行configure.d中的脚本，然后执行post-configure.d中的脚本，其中比较重要的是如下几个脚本：</p>
<ul>
<li><p>在20-os-apply-config中执行了os-apply-config命令，将os-apply-config中的使用json metadata文件渲染模板，然后将生成的配置文件放置到对应的位置上去</p>
</li>
<li><p>50-puppet-stack-config就是执行puppet代码了，是通过puppet apply的方式执行：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">puppet apply --detailed-exitcodes /etc/puppet/manifests/puppet-stack-config.pp</span><br></pre></td></tr></table></figure>

<p>这一步就是安装undercloud需要使用到的各个OpenStack组件了。</p>
</li>
<li><p>98-undercloud-setup，在安装好OpenStack组件之后，调用os-cloud-config提供的命令setup-neutron去创建安装OverCloud需要使用的管理网络。此外，如果enable了mistral功能，还会去创建workbook。</p>
</li>
</ul>
<p>除此之外，就是配置一些iptables规则，比如允许ip forwarding，可以让overcloud节点能访问外网，配置169.254.169.254的NAT规则，打通虚拟机访问metadata的通道等等，最终建立出来的undercloud网络拓扑如下：</p>
<p><img src="/assets/tripleo-undercloud-topology2.png"></p>
<p>经过上面这几步，就完成了undercloud的安装，整体来看undercloud采用了脚本+puppet的方式进行安装，安装过程非常复杂，定制化主要也是写elements，需要非常了解其中的原理才能定制undercloud，在现在的master分支，也就是Pike版本的TripleO中，采用了新的方法去安装undercloud，即也采用heat去部署，见<a target="_blank" rel="noopener" href="https://github.com/openstack/python-tripleoclient/commit/5f58088ff52636724d53f5b0590eefb8de55434c">这里</a>，不再依赖instack-undercloud中的各种elements，这样undercloud和overcloud的安装方法就统一了。</p>
<h3 id="附录1"><a href="#附录1" class="headerlink" title="附录1"></a>附录1</h3><p>安装undercloud时，生成的环境变量示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br></pre></td><td class="code"><pre><span class="line">&#123;  </span><br><span class="line">   &#x27;UNDERCLOUD_HORIZON_SECRET_KEY&#x27;:&#x27;51a4c2aee7cfa93efee549c2a1bd48e9a3501494&#x27;,</span><br><span class="line">   &#x27;TARGET_ROOT&#x27;:&#x27;/&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_IRONIC_PASSWORD&#x27;:&#x27;7558a0701f802a84faa625e0bc563170a97aa6cb&#x27;,</span><br><span class="line">   &#x27;INSPECTION_COLLECTORS&#x27;:&#x27;default,extra-hardware,logs&#x27;,</span><br><span class="line">   &#x27;ENABLE_MISTRAL&#x27;:&#x27;True&#x27;,</span><br><span class="line">   &#x27;SHELL&#x27;:&#x27;/bin/bash&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_SWIFT_ADMIN&#x27;:&#x27;http://192.168.24.1:8080&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_GLANCE_ADMIN&#x27;:&#x27;http://192.168.24.1:9292&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_CEILOMETER_SNMPD_PASSWORD&#x27;:&#x27;7e698c4fdb9a0eccc0a079c456c7a32a816120df&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_NOVA_ADMIN&#x27;:&#x27;http://192.168.24.1:8774/v2.1&#x27;,</span><br><span class="line">   &#x27;NODE_DIST&#x27;:&#x27;centos7&#x27;,</span><br><span class="line">   &#x27;HISTSIZE&#x27;:&#x27;1000&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_DEBUG&#x27;:&#x27;True&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_DB_PASSWORD&#x27;:&#x27;f2f25d1df2f05b810d7819bcfea45803185df833&#x27;,</span><br><span class="line">   &#x27;INSPECTION_RUNBENCH&#x27;:&#x27;False&#x27;,</span><br><span class="line">   &#x27;SERVICE_PRINCIPAL&#x27;:&#x27;&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_SWIFT_HASH_SUFFIX&#x27;:&#x27;b3c4eef1928b9b84427c06f2a1acc5d7f1b2f198&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_IRONIC_INTERNAL&#x27;:&#x27;http://192.168.24.1:6385&#x27;,</span><br><span class="line">   &#x27;XDG_RUNTIME_DIR&#x27;:&#x27;/run/user/1000&#x27;,</span><br><span class="line">   &#x27;TRIPLEO_INSTALL_USER&#x27;:&#x27;stack&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_KEYSTONE_PUBLIC&#x27;:&#x27;https://192.168.24.2:13000&#x27;,</span><br><span class="line">   &#x27;INSPECTION_KERNEL_ARGS&#x27;:&#x27;ipa-debug=1 ipa-inspection-dhcp-all-interfaces=1 ipa-collect-lldp=1&#x27;,</span><br><span class="line">   &#x27;STORE_EVENTS&#x27;:&#x27;False&#x27;,</span><br><span class="line">   &#x27;XDG_SESSION_ID&#x27;:&#x27;198&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ADMIN_VIP&#x27;:&#x27;192.168.24.3&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_CEILOMETER_ADMIN&#x27;:&#x27;http://192.168.24.1:8777&#x27;,</span><br><span class="line">   &#x27;JSONFILE&#x27;:&#x27;/usr/share/instack-undercloud/json-files/centos-7-undercloud-packages.json&#x27;,</span><br><span class="line">   &#x27;HOSTNAME&#x27;:&#x27;undercloud.localdomain&#x27;,</span><br><span class="line">   &#x27;SELINUX_LEVEL_REQUESTED&#x27;:&#x27;&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_AODH_PUBLIC&#x27;:&#x27;https://192.168.24.2:13042&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_AODH_INTERNAL&#x27;:&#x27;http://192.168.24.1:8042&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_MISTRAL_PUBLIC&#x27;:&#x27;https://192.168.24.2:13989/v2&#x27;,</span><br><span class="line">   &#x27;DIB_INIT_SYSTEM&#x27;:&#x27;systemd&#x27;,</span><br><span class="line">   &#x27;INSPECTION_INTERFACE&#x27;:&#x27;br-ctlplane&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_KEYSTONE_INTERNAL&#x27;:&#x27;http://192.168.24.1:5000&#x27;,</span><br><span class="line">   &#x27;MAIL&#x27;:&#x27;/var/spool/mail/stack&#x27;,</span><br><span class="line">   &#x27;TRIPLEO_UNDERCLOUD_PASSWORD_FILE&#x27;:&#x27;/home/stack/undercloud-passwords.conf&#x27;,</span><br><span class="line">   &#x27;SCHEDULER_MAX_ATTEMPTS&#x27;:&#x27;30&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_HEAT_INTERNAL&#x27;:&#x27;http://192.168.24.1:8004/v1/%(tenant_id)s&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_AODH_ADMIN&#x27;:&#x27;http://192.168.24.1:8042&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_HEAT_PASSWORD&#x27;:&#x27;561b715ce0f8ffe0c1482eeaed3df09cd2590a91&#x27;,</span><br><span class="line">   &#x27;LOCAL_INTERFACE&#x27;:&#x27;eth1&#x27;,</span><br><span class="line">   &#x27;LESSOPEN&#x27;:&#x27;||/usr/bin/lesspipe.sh %s&#x27;,</span><br><span class="line">   &#x27;MASQUERADE_NETWORK&#x27;:&#x27;192.168.24.0/24&#x27;,</span><br><span class="line">   &#x27;USER&#x27;:&#x27;root&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_HEAT_PUBLIC&#x27;:&#x27;https://192.168.24.2:13004/v1/%(tenant_id)s&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_HEAT_STACK_DOMAIN_ADMIN_PASSWORD&#x27;:&#x27;38e14254ddf98458ba09dcf600d936d3631a28b7&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_NEUTRON_ADMIN&#x27;:&#x27;http://192.168.24.1:9696&#x27;,</span><br><span class="line">   &#x27;SHLVL&#x27;:&#x27;3&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_ZAQAR_ADMIN&#x27;:&#x27;http://192.168.24.1:8888&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_CEILOMETER_PUBLIC&#x27;:&#x27;https://192.168.24.2:13777&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_KEYSTONE_ADMIN&#x27;:&#x27;http://192.168.24.1:35357&#x27;,</span><br><span class="line">   &#x27;SUDO_USER&#x27;:&#x27;stack&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_IRONIC_INSPECTOR_INTERNAL&#x27;:&#x27;http://192.168.24.1:5050&#x27;,</span><br><span class="line">   &#x27;ELEMENTS_PATH&#x27;:&#x27;/usr/share/tripleo-puppet-elements:/usr/share/instack-undercloud:/usr/share/tripleo-image-elements:/usr/share/diskimage-builder/elements&#x27;,</span><br><span class="line">   &#x27;ENABLE_VALIDATIONS&#x27;:&#x27;True&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_ZAQAR_WEBSOCKET_INTERNAL&#x27;:&#x27;ws://192.168.24.1:9000&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ADMIN_PASSWORD&#x27;:&#x27;78ad5a42318e7d41e5a2e0f1f9600375ba985b16&#x27;,</span><br><span class="line">   &#x27;LOCAL_MTU&#x27;:&#x27;1500&#x27;,</span><br><span class="line">   &#x27;TMP_MOUNT_PATH&#x27;:&#x27;/tmp/instack.gbtlM6/mnt&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_MISTRAL_INTERNAL&#x27;:&#x27;http://192.168.24.1:8989/v2&#x27;,</span><br><span class="line">   &#x27;SSH_CONNECTION&#x27;:&#x27;192.168.23.1 37621 192.168.23.47 22&#x27;,</span><br><span class="line">   &#x27;IMAGE_PATH&#x27;:&#x27;.&#x27;,</span><br><span class="line">   &#x27;GUESTFISH_OUTPUT&#x27;:&#x27;\\e[0m&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_SWIFT_INTERNAL&#x27;:&#x27;http://192.168.24.1:8080/v1/AUTH_%(tenant_id)s&#x27;,</span><br><span class="line">   &#x27;GENERATE_SERVICE_CERTIFICATE&#x27;:&#x27;True&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_CEILOMETER_METERING_SECRET&#x27;:&#x27;989d08bc16f00298e7b0cf9fd396d5477a46c959&#x27;,</span><br><span class="line">   &#x27;DIB_IMAGE_CACHE&#x27;:&#x27;/root/.cache/image-create&#x27;,</span><br><span class="line">   &#x27;DIB_DEFAULT_INSTALLTYPE&#x27;:&#x27;package&#x27;,</span><br><span class="line">   &#x27;IPXE_ENABLED&#x27;:&#x27;True&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_IRONIC_INSPECTOR_PUBLIC&#x27;:&#x27;https://192.168.24.2:13050&#x27;,</span><br><span class="line">   &#x27;SELINUX_USE_CURRENT_RANGE&#x27;:&#x27;&#x27;,</span><br><span class="line">   &#x27;CLEAN_NODES&#x27;:&#x27;False&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_NOVA_PUBLIC&#x27;:&#x27;https://192.168.24.2:13774/v2.1&#x27;,</span><br><span class="line">   &#x27;HOME&#x27;:&#x27;/root&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_ZAQAR_INTERNAL&#x27;:&#x27;http://192.168.24.1:8888&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_IRONIC_INSPECTOR_ADMIN&#x27;:&#x27;http://192.168.24.1:5050&#x27;,</span><br><span class="line">   &#x27;GUESTFISH_INIT&#x27;:&#x27;\\e[1;34m&#x27;,</span><br><span class="line">   &#x27;LANG&#x27;:&#x27;en_US.utf8&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_SERVICE_CERTIFICATE&#x27;:&#x27;/etc/pki/tls/certs/undercloud-192.168.24.2.pem&#x27;,</span><br><span class="line">   &#x27;ENABLE_TELEMETRY&#x27;:&#x27;True&#x27;,</span><br><span class="line">   &#x27;DHCP_START&#x27;:&#x27;192.168.24.5&#x27;,</span><br><span class="line">   &#x27;IMAGE_NAME&#x27;:&#x27;instack&#x27;,</span><br><span class="line">   &#x27;DIB_OFFLINE&#x27;:&#x27;&#x27;,</span><br><span class="line">   &#x27;ENABLE_UI&#x27;:&#x27;True&#x27;,</span><br><span class="line">   &#x27;_&#x27;:&#x27;/usr/bin/python&#x27;,</span><br><span class="line">   &#x27;NET_CONFIG_OVERRIDE&#x27;:&#x27;&#x27;,</span><br><span class="line">   &#x27;PUBLIC_INTERFACE_IP&#x27;:&#x27;192.168.24.1/24&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_IRONIC_ADMIN&#x27;:&#x27;http://192.168.24.1:6385&#x27;,</span><br><span class="line">   &#x27;USERNAME&#x27;:&#x27;root&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_HEAT_ADMIN&#x27;:&#x27;http://192.168.24.1:8004/v1/%(tenant_id)s&#x27;,</span><br><span class="line">   &#x27;LOCAL_IP&#x27;:&#x27;192.168.24.1&#x27;,</span><br><span class="line">   &#x27;SELINUX_ROLE_REQUESTED&#x27;:&#x27;&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_GLANCE_INTERNAL&#x27;:&#x27;http://192.168.24.1:9292&#x27;,</span><br><span class="line">   &#x27;SUDO_GID&#x27;:&#x27;1000&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_IRONIC_PUBLIC&#x27;:&#x27;https://192.168.24.2:13385&#x27;,</span><br><span class="line">   &#x27;_LIB&#x27;:&#x27;/usr/share/diskimage-builder/lib&#x27;,</span><br><span class="line">   &#x27;SSH_TTY&#x27;:&#x27;/dev/pts/1&#x27;,</span><br><span class="line">   &#x27;DHCP_END&#x27;:&#x27;192.168.24.30&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_NEUTRON_INTERNAL&#x27;:&#x27;http://192.168.24.1:9696&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_ZAQAR_WEBSOCKET_ADMIN&#x27;:&#x27;ws://192.168.24.1:9000&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_RABBIT_COOKIE&#x27;:&#x27;274d7049a7cdd3be29759776b6054907be3cb410&#x27;,</span><br><span class="line">   &#x27;NETWORK_GATEWAY&#x27;:&#x27;192.168.24.1&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_NOVA_INTERNAL&#x27;:&#x27;http://192.168.24.1:8774/v2.1&#x27;,</span><br><span class="line">   &#x27;INSPECTION_ENABLE_UEFI&#x27;:&#x27;True&#x27;,</span><br><span class="line">   &#x27;TRIPLEO_UNDERCLOUD_CONF_FILE&#x27;:&#x27;/home/stack/undercloud.conf&#x27;,</span><br><span class="line">   &#x27;CERTIFICATE_GENERATION_CA&#x27;:&#x27;local&#x27;,</span><br><span class="line">   &#x27;HIERADATA_OVERRIDE&#x27;:&#x27;quickstart-hieradata-overrides.yaml&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_NEUTRON_PASSWORD&#x27;:&#x27;4bde341a0b0183b0b7d40d71a9f4f7d78b62f163&#x27;,</span><br><span class="line">   &#x27;ENABLE_ZAQAR&#x27;:&#x27;True&#x27;,</span><br><span class="line">   &#x27;SSH_CLIENT&#x27;:&#x27;192.168.23.1 37621 22&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_MISTRAL_ADMIN&#x27;:&#x27;http://192.168.24.1:8989/v2&#x27;,</span><br><span class="line">   &#x27;LOGNAME&#x27;:&#x27;root&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_CEILOMETER_PASSWORD&#x27;:&#x27;457c7fb371fe0228e41484de9b77d7515146c3c1&#x27;,</span><br><span class="line">   &#x27;PATH&#x27;:&#x27;/sbin:/bin:/usr/sbin:/usr/bin:/usr/local/bin:/tmp/tmp0o4uKR/bin&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_SWIFT_PUBLIC&#x27;:&#x27;https://192.168.24.2:13808/v1/AUTH_%(tenant_id)s&#x27;,</span><br><span class="line">   &#x27;INSPECTION_IPRANGE&#x27;:&#x27;192.168.24.100,192.168.24.120&#x27;,</span><br><span class="line">   &#x27;GUESTFISH_RESTORE&#x27;:&#x27;\\e[0m&#x27;,</span><br><span class="line">   &#x27;MEMBER_ROLE_EXISTS&#x27;:&#x27;False&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_ZAQAR_PUBLIC&#x27;:&#x27;https://192.168.24.2:13888&#x27;,</span><br><span class="line">   &#x27;TERM&#x27;:&#x27;screen&#x27;,</span><br><span class="line">   &#x27;ENABLE_TEMPEST&#x27;:&#x27;True&#x27;,</span><br><span class="line">   &#x27;ARCH&#x27;:&#x27;amd64&#x27;,</span><br><span class="line">   &#x27;IMAGE_ELEMENT&#x27;:u&#x27;element-manifest enable-packages-install hiera install-types manifests os-apply-config os-refresh-config puppet-modules puppet-stack-config source-repositories undercloud-install&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ZAQAR_PASSWORD&#x27;:&#x27;a563879e04e18c7c4cf3f2b4e66637b1d84b9e10&#x27;,</span><br><span class="line">   &#x27;DIB_ARGS&#x27;:&quot;[&#x27;/bin/instack&#x27;, &#x27;-p&#x27;, &#x27;/usr/share/tripleo-puppet-elements:/usr/share/instack-undercloud:/usr/share/tripleo-image-elements:/usr/share/diskimage-builder/elements&#x27;, &#x27;-j&#x27;, &#x27;/usr/share/instack-undercloud/json-files/centos-7-undercloud-packages.json&#x27;]&quot;,</span><br><span class="line">   &#x27;UNDERCLOUD_AODH_PASSWORD&#x27;:&#x27;9b4aacbb5ea53d59946e22152e4296e9e157fb8b&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ADMIN_TOKEN&#x27;:&#x27;f4d890602dc406c76cf3c156f3a8c374a2028b8b&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_ZAQAR_WEBSOCKET_PUBLIC&#x27;:&#x27;wss://192.168.24.2:9000&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_CEILOMETER_SNMPD_USER&#x27;:&#x27;ro_snmp_user&#x27;,</span><br><span class="line">   &#x27;GUESTFISH_PS1&#x27;:&#x27;\\[\\e[1;32m\\]&gt;&lt;fs&gt;\\[\\e[0;31m\\] &#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_SWIFT_PASSWORD&#x27;:&#x27;6646c8abbc69900be43ad9aeb2fb9bcde084b83c&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_GLANCE_PUBLIC&#x27;:&#x27;https://192.168.24.2:13292&#x27;,</span><br><span class="line">   &#x27;SUDO_UID&#x27;:&#x27;1000&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_CEILOMETER_INTERNAL&#x27;:&#x27;http://192.168.24.1:8777&#x27;,</span><br><span class="line">   &#x27;TMP_HOOKS_PATH&#x27;:&#x27;/tmp/tmp0o4uKR&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_ENDPOINT_NEUTRON_PUBLIC&#x27;:&#x27;https://192.168.24.2:13696&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_HAPROXY_STATS_PASSWORD&#x27;:&#x27;cfe22a516eb260a515368b42ecdafd0c31a4eab0&#x27;,</span><br><span class="line">   &#x27;SUDO_COMMAND&#x27;:&#x27;/bin/instack -p /usr/share/tripleo-puppet-elements:/usr/share/instack-undercloud:/usr/share/tripleo-image-elements:/usr/share/diskimage-builder/elements -j /usr/share/instack-undercloud/json-files/centos-7-undercloud-packages.json&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_GLANCE_PASSWORD&#x27;:&#x27;432b0417d7e43907e9df98fae3b509306932275c&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_RABBIT_PASSWORD&#x27;:&#x27;3f63076c9b2ec748d7021311acc0a4fcfcbf1b30&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_MISTRAL_PASSWORD&#x27;:&#x27;a4e093153909d0d57c627e3b3b704c286fee2fa0&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_NOVA_PASSWORD&#x27;:&#x27;54fca7b5d7905511604f69de11d67d4144bb669f&#x27;,</span><br><span class="line">   &#x27;NETWORK_CIDR&#x27;:&#x27;192.168.24.0/24&#x27;,</span><br><span class="line">   &#x27;HISTCONTROL&#x27;:&#x27;ignoredups&#x27;,</span><br><span class="line">   &#x27;PWD&#x27;:&#x27;/home/stack&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_PUBLIC_VIP&#x27;:&#x27;192.168.24.2&#x27;,</span><br><span class="line">   &#x27;INSPECTION_EXTRAS&#x27;:&#x27;True&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_HEAT_ENCRYPTION_KEY&#x27;:&#x27;9f0926190c3bd6c45203bb645af27039&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_HOSTNAME&#x27;:&#x27;None&#x27;,</span><br><span class="line">   &#x27;UNDERCLOUD_RABBIT_USERNAME&#x27;:&#x27;44422a8e431da7e68defea8712790cf69bca46b1&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="附录2"><a href="#附录2" class="headerlink" title="附录2"></a>附录2</h3><p>os-apply-config使用的metadata配置文件示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"> &quot;hiera&quot;: &#123;</span><br><span class="line">  &quot;hierarchy&quot;: [</span><br><span class="line">   &quot;quickstart-hieradata-overrides&quot;,</span><br><span class="line">   &quot;\&quot;%&#123;::operatingsystem&#125;\&quot;&quot;,</span><br><span class="line">   &quot;\&quot;%&#123;::osfamily&#125;\&quot;&quot;,</span><br><span class="line">   &quot;puppet-stack-config&quot;</span><br><span class="line">  ]&#125;,</span><br><span class="line">  &quot;local-ip&quot;: &quot;192.168.24.1&quot;,</span><br><span class="line">  &quot;masquerade_networks&quot;: [&quot;192.168.24.0/24&quot;],</span><br><span class="line">  &quot;service_certificate&quot;: &quot;/etc/pki/tls/certs/undercloud-192.168.24.2.pem&quot;,</span><br><span class="line">  &quot;public_vip&quot;: &quot;192.168.24.2&quot;,</span><br><span class="line">  &quot;neutron&quot;: &#123;</span><br><span class="line">    &quot;dhcp_start&quot;: &quot;192.168.24.5&quot;,</span><br><span class="line">    &quot;dhcp_end&quot;: &quot;192.168.24.30&quot;,</span><br><span class="line">    &quot;network_cidr&quot;: &quot;192.168.24.0/24&quot;,</span><br><span class="line">    &quot;network_gateway&quot;: &quot;192.168.24.1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;inspection&quot;: &#123;</span><br><span class="line">    &quot;interface&quot;: &quot;&quot;,</span><br><span class="line">    &quot;iprange&quot;: &quot;&quot;,</span><br><span class="line">    &quot;runbench&quot;: &quot;&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;os_net_config&quot;: &#123;</span><br><span class="line">  &quot;network_config&quot;: [</span><br><span class="line">   &#123;</span><br><span class="line">    &quot;type&quot;: &quot;ovs_bridge&quot;,</span><br><span class="line">    &quot;name&quot;: &quot;br-ctlplane&quot;,</span><br><span class="line">    &quot;ovs_extra&quot;: [</span><br><span class="line">     &quot;br-set-external-id br-ctlplane bridge-id br-ctlplane&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;members&quot;: [</span><br><span class="line">     &#123;</span><br><span class="line">      &quot;type&quot;: &quot;interface&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;eth1&quot;,</span><br><span class="line">      &quot;primary&quot;: &quot;true&quot;,</span><br><span class="line">      &quot;mtu&quot;: 1500</span><br><span class="line">     &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;addresses&quot;: [</span><br><span class="line">      &#123;</span><br><span class="line">        &quot;ip_netmask&quot;: &quot;192.168.24.1/24&quot;</span><br><span class="line">      &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;mtu&quot;: 1500</span><br><span class="line">  &#125;</span><br><span class="line">  ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;keystone&quot;: &#123;</span><br><span class="line">    &quot;host&quot;: &quot;192.168.24.1&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;ironic&quot;: &#123;</span><br><span class="line">    &quot;service-password&quot;: &quot;7558a0701f802a84faa625e0bc563170a97aa6cb&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;bootstrap_host&quot;: &#123;</span><br><span class="line">    &quot;bootstrap_nodeid&quot;: &quot;undercloud&quot;,</span><br><span class="line">    &quot;nodeid&quot;: &quot;undercloud&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="附录3"><a href="#附录3" class="headerlink" title="附录3"></a>附录3</h3><p>instack-undercloud中使用到的elements以及其中hook和脚本示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">* install-types(diskimage-builder)</span><br><span class="line">    * extra-data.d</span><br><span class="line">        * 99-enable-install-types</span><br><span class="line">    * The base element enables the chosen install type by symlinking the correct hook scripts under install.d directly</span><br><span class="line">* element-manifest(diskimage-builder)</span><br><span class="line">    * extra-data.d</span><br><span class="line">        * 75-inject-element-manifest</span><br><span class="line">* manifests(diskimage-builder)</span><br><span class="line">    * extra-data.d</span><br><span class="line">        * 20-manifest-dir</span><br><span class="line">    * environment.d</span><br><span class="line">        * 14-manifests</span><br><span class="line">    * cleanup.d</span><br><span class="line">        * 01-copy-manifests-dir</span><br><span class="line">* source-repositories(diskimage-builder)</span><br><span class="line">    * extra-data.d</span><br><span class="line">        * 98-source-repositories</span><br><span class="line"></span><br><span class="line">* puppet-modules(tripleo-puppet-elements)</span><br><span class="line">    * install.d/</span><br><span class="line">        * puppet-modules-package-install/</span><br><span class="line">            * 75-puppet-modules-package</span><br><span class="line">        * puppet-modules-source-install/</span><br><span class="line">            * 75-puppet-modules-source</span><br><span class="line">        * 根据install_type会将对应目录下的脚本link到install.d目录下</span><br><span class="line">    * environment.d/</span><br><span class="line">        * 01-puppet-module-pins.sh</span><br><span class="line">        * 02-puppet-modules-install-types.sh</span><br><span class="line">    * source-repository-puppet-modules</span><br><span class="line">* hiera(tripleo-puppet-elements)</span><br><span class="line">    * 10-hiera-disable</span><br><span class="line">    * 40-hiera-datafiles</span><br><span class="line">    * install.d/</span><br><span class="line">        * 10-hiera-yaml-symlink</span><br><span class="line">        * 11-hiera-orc-install</span><br><span class="line">    * os-apply-config/</span><br><span class="line">        * etc/puppet/hiera.yaml</span><br><span class="line"></span><br><span class="line">* enable-packages-install(tripleo-image-elements)</span><br><span class="line">    * environment.d/</span><br><span class="line">        * 01-export-install-types.bash</span><br><span class="line">* os-apply-config(tripleo-image-elements)</span><br><span class="line">    * environment.d/</span><br><span class="line">        * 10-os-apply-config-venv-dir.bash</span><br><span class="line">    * install.d/</span><br><span class="line">        * 11-create-template-root</span><br><span class="line">        * 99-install-config-templates</span><br><span class="line">        * os-apply-config-source-install/</span><br><span class="line">            * 10-os-apply-config</span><br><span class="line">    * os-refresh-config/</span><br><span class="line">        * configure.d/</span><br><span class="line">            * 20-os-apply-config</span><br><span class="line">* os-refresh-config(tripleo-image-elements)</span><br><span class="line">    * install.d/</span><br><span class="line">        * 99-os-refresh-config-install-scripts</span><br><span class="line">        * os-refresh-config-source-install/</span><br><span class="line">            * 10-os-refresh-config</span><br><span class="line">    * os-refresh-config/</span><br><span class="line">        * post-configure.d/</span><br><span class="line">            * 99-refresh-completed</span><br><span class="line"></span><br><span class="line">* undercloud-install(instack-undercloud)</span><br><span class="line">    * os-apply-config/</span><br><span class="line">        * etc/</span><br><span class="line">        * root/</span><br><span class="line">        * var/</span><br><span class="line">    * os-refresh-config/</span><br><span class="line">        * configure.d/</span><br><span class="line">            * 30-reload-keepalived</span><br><span class="line">        * post-configure.d/</span><br><span class="line">            * 80-seedstack-masquerade</span><br><span class="line">            * 98-undercloud-setup</span><br><span class="line">* puppet-stack-config(instack-undercloud)</span><br><span class="line">    * extra-data.d/</span><br><span class="line">        * 10-install-git</span><br><span class="line">    * install.d/</span><br><span class="line">        * 02-puppet-stack-config</span><br><span class="line">        * 10-puppet-stack-config-puppet-module</span><br><span class="line">    * os-apply-config/</span><br><span class="line">        * etc/</span><br><span class="line">    * os-refresh-config/</span><br><span class="line">        * configure.d/</span><br><span class="line">            * 50-puppet-stack-config</span><br><span class="line">        * post-configure.d/</span><br><span class="line">            * 10-iptables</span><br></pre></td></tr></table></figure>

<h3 id="附录4"><a href="#附录4" class="headerlink" title="附录4"></a>附录4</h3><p>instack-undercloud中使用到的elements以及其中hook和脚本，在instack中被合并之后的示例：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">▾ cleanup.d/</span><br><span class="line">    01-copy-manifests-dir*</span><br><span class="line">▾ environment.d/</span><br><span class="line">    01-export-install-types.bash</span><br><span class="line">    02-puppet-modules-install-types.sh</span><br><span class="line">    10-os-apply-config-venv-dir.bash</span><br><span class="line">    14-manifests</span><br><span class="line">▾ extra-data.d/</span><br><span class="line">    10-install-git*</span><br><span class="line">    20-manifest-dir*</span><br><span class="line">    75-inject-element-manifest*</span><br><span class="line">    98-source-repositories*</span><br><span class="line">    99-enable-install-types*</span><br><span class="line">▾ install.d/</span><br><span class="line">  ▾ os-apply-config-source-install/</span><br><span class="line">      10-os-apply-config*</span><br><span class="line">  ▾ os-refresh-config-source-install/</span><br><span class="line">      10-os-refresh-config*</span><br><span class="line">  ▾ puppet-modules-package-install/</span><br><span class="line">      75-puppet-modules-package*</span><br><span class="line">  ▾ puppet-modules-source-install/</span><br><span class="line">      75-puppet-modules-source*</span><br><span class="line">    02-puppet-stack-config*</span><br><span class="line">    10-hiera-yaml-symlink*</span><br><span class="line">    10-puppet-stack-config-puppet-module*</span><br><span class="line">    11-create-template-root*</span><br><span class="line">    99-install-config-templates*</span><br><span class="line">    99-os-refresh-config-install-scripts*</span><br><span class="line">    package-installs-hiera</span><br></pre></td></tr></table></figure>



</div><div class="article-licensing box"><div class="licensing-title"><p>TripleO UnderCloud 安装原理</p><p><a href="https://hackerain.me/2017/03/09/openstack/tripleo/undercloud.html">https://hackerain.me/2017/03/09/openstack/tripleo/undercloud.html</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>hackerain</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2017-03-09</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-03-11</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/openstack/">openstack</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2017/04/16/openstack/tripleo/introspection.html"><i class="level-item fas fa-chevron-left"></i><span class="level-item">TripleO Introspection 介绍</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2017/03/06/openstack/tripleo/instack.html"><span class="level-item">TripleO instack介绍</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/assets/avatar.jpg" alt="开心BOY"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">开心BOY</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">42</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">7</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="/about" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/hackerain"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="知识星球" href="https://t.zsxq.com/0bWmBFDpu"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#1-生成环境变量"><span class="level-left"><span class="level-item">1</span><span class="level-item">1. 生成环境变量</span></span></a></li><li><a class="level is-mobile" href="#2-生成Metadata配置文件"><span class="level-left"><span class="level-item">2</span><span class="level-item">2. 生成Metadata配置文件</span></span></a></li><li><a class="level is-mobile" href="#3-执行instack"><span class="level-left"><span class="level-item">3</span><span class="level-item">3. 执行instack</span></span></a></li><li><a class="level is-mobile" href="#4-执行os-refresh-config"><span class="level-left"><span class="level-item">4</span><span class="level-item">4. 执行os-refresh-config</span></span></a></li><li><a class="level is-mobile" href="#附录1"><span class="level-left"><span class="level-item">5</span><span class="level-item">附录1</span></span></a></li><li><a class="level is-mobile" href="#附录2"><span class="level-left"><span class="level-item">6</span><span class="level-item">附录2</span></span></a></li><li><a class="level is-mobile" href="#附录3"><span class="level-left"><span class="level-item">7</span><span class="level-item">附录3</span></span></a></li><li><a class="level is-mobile" href="#附录4"><span class="level-left"><span class="level-item">8</span><span class="level-item">附录4</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-28T00:00:00.000Z">2023-10-28</time></p><p class="title"><a href="/2023/10/28/kubernetes/kube-scheme.html">Kubernetes API 多版本和序列化</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-09-26T00:00:00.000Z">2022-09-26</time></p><p class="title"><a href="/2022/09/26/elasticsearch/elasticsearch_large_text_field.html">Elasticsearch大文本字段(large text field)优化方案</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-08-07T10:52:55.000Z">2022-08-07</time></p><p class="title"><a href="/2022/08/07/umi/umi.html">UMI框架解析</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-11-19T22:12:55.000Z">2021-11-19</time></p><p class="title"><a href="/2021/11/19/openstack/openstack_uvw_highlight.html">OpenStack Ussuri-Victoria-Wallaby版本新功能介绍</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-11-19T22:03:55.000Z">2021-11-19</time></p><p class="title"><a href="/2021/11/19/openstack/openstack_rst_highlight.html">OpenStack Stein-Train版本新功能介绍</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/"><span class="level-start"><span class="level-item">2023</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/"><span class="level-start"><span class="level-item">2020</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/"><span class="level-start"><span class="level-item">2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/"><span class="level-start"><span class="level-item">2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/"><span class="level-start"><span class="level-item">2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ceph/"><span class="tag">ceph</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/elasticsearch/"><span class="tag">elasticsearch</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kubernetes/"><span class="tag">kubernetes</span><span class="tag">17</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openstack/"><span class="tag">openstack</span><span class="tag">19</span></a></div><div class="control"><a class="tags has-addons" href="/tags/operations/"><span class="tag">operations</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/umi/"><span class="tag">umi</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/assets/logo.jpg" alt="开心BOY" height="28"></a><p class="is-size-7"><span>&copy; 2023 hackerain</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2023</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/hackerain"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>