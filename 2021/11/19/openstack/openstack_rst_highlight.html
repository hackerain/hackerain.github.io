<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>OpenStack Stein-Train版本新功能介绍 - 开心BOY</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="开心BOY"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="开心BOY"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="社区目标每个Release，社区都会定义几个社区目标，期望所有项目能够实现，这有利于对OpenStack下众多的项目能够有统一整体性，而不是各自发展各自的。OpenStack Stein到Train版本，社区定义了如下几个社区目标："><meta property="og:type" content="blog"><meta property="og:title" content="OpenStack Stein-Train版本新功能介绍"><meta property="og:url" content="https://hackerain.me/2021/11/19/openstack/openstack_rst_highlight.html"><meta property="og:site_name" content="开心BOY"><meta property="og:description" content="社区目标每个Release，社区都会定义几个社区目标，期望所有项目能够实现，这有利于对OpenStack下众多的项目能够有统一整体性，而不是各自发展各自的。OpenStack Stein到Train版本，社区定义了如下几个社区目标："><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://hackerain.me/img/og_image.png"><meta property="article:published_time" content="2021-11-19T22:03:55.000Z"><meta property="article:modified_time" content="2023-03-11T15:45:44.743Z"><meta property="article:author" content="hackerain"><meta property="article:tag" content="openstack"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://hackerain.me/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hackerain.me/2021/11/19/openstack/openstack_rst_highlight.html"},"headline":"OpenStack Stein-Train版本新功能介绍","image":["https://hackerain.me/img/og_image.png"],"datePublished":"2021-11-19T22:03:55.000Z","dateModified":"2023-03-11T15:45:44.743Z","author":{"@type":"Person","name":"hackerain"},"publisher":{"@type":"Organization","name":"开心BOY","logo":{"@type":"ImageObject","url":"https://hackerain.me/assets/logo.jpg"}},"description":"社区目标每个Release，社区都会定义几个社区目标，期望所有项目能够实现，这有利于对OpenStack下众多的项目能够有统一整体性，而不是各自发展各自的。OpenStack Stein到Train版本，社区定义了如下几个社区目标："}</script><link rel="canonical" href="https://hackerain.me/2021/11/19/openstack/openstack_rst_highlight.html"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="开心BOY" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/assets/logo.jpg" alt="开心BOY" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2021-11-19T22:03:55.000Z" title="11/19/2021, 10:03:55 PM">2021-11-19</time>发表</span><span class="level-item"><time dateTime="2023-03-11T15:45:44.743Z" title="3/11/2023, 3:45:44 PM">2023-03-11</time>更新</span><span class="level-item">37 分钟读完 (大约5497个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">OpenStack Stein-Train版本新功能介绍</h1><div class="content"><h2 id="社区目标"><a href="#社区目标" class="headerlink" title="社区目标"></a>社区目标</h2><p>每个Release，社区都会定义几个社区目标，期望所有项目能够实现，这有利于对OpenStack下众多的项目能够有统一整体性，而不是各自发展各自的。OpenStack Stein到Train版本，社区定义了如下几个社区目标：</p>
<span id="more"></span>

<ul>
<li><a target="_blank" rel="noopener" href="https://governance.openstack.org/tc/goals/selected/stein/python3-first.html">Run under Python 3 by default</a></li>
</ul>
<blockquote>
<p>社区很早就开始推动Python2到Python3的升级，在Stein版，将默认的运行模式切换到了Python3，对Python2的支持，将逐渐被废弃。</p>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://governance.openstack.org/tc/goals/selected/stein/upgrade-checkers.html">Support Pre Upgrade Checks</a></li>
</ul>
<blockquote>
<p>OpenStack升级一直以来是一个难题，社区在这方面也逐渐采取了很多措施，包括跨版本升级，以及在线升级，在Stein版，社区又制定了升级检查的支持，目的是在升级前，能够运行一个检查命令，检查各项资源是否满足升级的条件。</p>
</blockquote>
<ul>
<li><a target="_blank" rel="noopener" href="https://governance.openstack.org/tc/goals/selected/train/ipv6-support-and-testing.html">Support IPv6-Only Deployments</a></li>
</ul>
<blockquote>
<p>推动各个项目能够在纯IPv6的环境中部署。</p>
</blockquote>
<h2 id="特性概述"><a href="#特性概述" class="headerlink" title="特性概述"></a>特性概述</h2><p>这两个版本在功能上比较大的变化，是对资源管理，硬件加速，裸机管理方面的增强和改进，这几个方面相关的项目比较活跃。</p>
<ul>
<li>资源管理项目Placement独立出来</li>
</ul>
<p>Placement就是为了管理OpenStack中日益增多的除了CPU，内存等基础资源之外的各种资源而出现的，一开始是孵化在Nova API中的，现在已经比较成熟，独立成一个单独的项目，有自己独立的API和数据库，社区提供了从Nova API迁移到独立的Placement的步骤。</p>
<ul>
<li>引进硬件加速器项目：cyborg</li>
</ul>
<p>随着5G，AI需求的增加，在云平台中有效管理各种加速器的需求也逐渐多了起来，该项目提供了硬件和软件加速器的管理框架，软件包括dpdk/spdk, pmem等，硬件包括FPGA, GPU, ARM SoC, NVMe SSD等等，它跟Nova和Placement协调配合，可以将虚拟机调度到符合特定加速器要求的计算节点，并且和cyborg配合，将加速器配置到虚拟机中。</p>
<ul>
<li>裸机管理</li>
</ul>
<p>裸机管理的需求也在逐渐增多，因此Ironic项目比较活跃，Ironic中已经支持了很多硬件的驱动，最近又引进了跟IPMI协议类似的一个通用协议Redfish，以能够管理遵循Redfish协议的物理硬件，此外为了让裸机能够支持智能网卡，实现更加高级的网络功能，在这两个项目周期中，Ironic, Nova, Neutron都提供了相应的支持改进。<br>功能盘点</p>
<h3 id="Cinder"><a href="#Cinder" class="headerlink" title="Cinder"></a>Cinder</h3><p>Stein</p>
<ul>
<li>在RBD driver中，增加了对multiattach和延迟删除(deferred deletion)的功能</li>
</ul>
<p>Train</p>
<ul>
<li>在将volume上传到glance中时，在做压缩以及格式转换时，添加了硬件加速的支持，如可利用 Intel QAT 进行加速，可以获得更大的压缩率，同时降低CPU的使用率，减少上传的时间</li>
<li>添加了 volume re-image api，该API是为了配合Nova对boot from volume无法进行rebuild的问题进行改进的，该API提供了原生的将一个volume重新加载进image数据的操作，让nova的rebuild操作变得简单</li>
</ul>
<h3 id="Glance"><a href="#Glance" class="headerlink" title="Glance"></a>Glance</h3><ul>
<li>glance在Rocky引入了multistore的能力，即同一个glance可以对接多个存储后端，类似于cinder的multibackend，这两个release，multistore功能得到进一步加强和稳定，到Train版，已经生产可用。</li>
</ul>
<h3 id="Ironic"><a href="#Ironic" class="headerlink" title="Ironic"></a>Ironic</h3><p>Stein</p>
<ul>
<li>进一步加强Redfish协议硬件的支持，现在可以通过Redfish协议来Introspection操作，不用IPA的方式，此外还有可以通过Redfish来设置BIOS</li>
<li>引入了Deployment Templates功能，用户可以通过模板的方式对硬件的部署过程进行定制</li>
<li>添加了对智能网卡的支持，可以让物理机的网络配置更加灵活</li>
<li>添加了Allocatoin API，Ironic本身提供了一个根据特定条件，来选择备选机器的API，可以不依赖于外部的调度程序，这对独立使用Ironic提供了方便</li>
</ul>
<p>Train</p>
<ul>
<li>提供了对软RAID的配置</li>
</ul>
<h3 id="Keystone"><a href="#Keystone" class="headerlink" title="Keystone"></a>Keystone</h3><p>Stein</p>
<ul>
<li>提供了一个limits api，用来为其他项目提供quota的全局支持，后续各个项目可以依赖此API，标准化quota的管理</li>
<li>提供了Json Web Token的支持，这是除了Fernet Token之外，引入的第二个Token机制</li>
</ul>
<p>Train</p>
<ul>
<li>Keystone的API支持角色的分级，默认设置了reader, member, admin角色，主要是引入了reader只读的角色，即系统内置了只读的规则和角色，不需要后续由管理员专门设置</li>
<li>Keystone中关键的project, role, domain可以设置为immutable，以防止被误删，影响服务</li>
</ul>
<h3 id="Kolla"><a href="#Kolla" class="headerlink" title="Kolla"></a>Kolla</h3><p>Stein</p>
<ul>
<li>添加了对Placement的部署支持</li>
<li>添加了对Cyborg的部署支持</li>
<li>支持配置一个独立的迁移网络来进行虚拟机的迁移</li>
<li>支持为nova_libvirt容器配置maximum files 和 processes limits ，默认值1024在使用ceph的情况下太小了</li>
<li>支持Nova, Neutron的滚动升级</li>
<li>对Docker的日志限制了大小，不会无限制增长了</li>
</ul>
<p>Train</p>
<ul>
<li>添加了对Masakari的部署支持</li>
<li>支持控制层面的服务运行在纯IPv6的环境中</li>
<li>增加了一个新的命令deploy-containers，可以在没有配置变更的情况下，只更新镜像，加快部署速度</li>
<li>支持为RabbitMQ传递额外的 rabbitmq_server_additional_erl_args 参数</li>
<li>支持为容器挂载额外的Volume，<service_name>_extra_volumes.</li>
<li>添加了对CentOS 8的支持，包括操作系统和容器镜像，Train版本同时支持CentOS 7和CentOS 8</li>
<li>添加了一个参数 docker_disable_default_network，可以将Docker默认添加的网络和网桥禁用掉</li>
</ul>
<h3 id="Kuryr"><a href="#Kuryr" class="headerlink" title="Kuryr"></a>Kuryr</h3><p>Stein</p>
<ul>
<li>添加了对Kubernetes Network Policies的支持，通过安全组去实现的</li>
<li>添加了对CRI-O作为Kubernetes  CRI时的支持</li>
</ul>
<p>Train</p>
<ul>
<li>强化了对Kubernetes Network Policies的支持</li>
<li>Kruyr CNI 使用Go重写，以方便部署</li>
</ul>
<h3 id="Neutron"><a href="#Neutron" class="headerlink" title="Neutron"></a>Neutron</h3><p>Stein</p>
<ul>
<li>添加了对QoS minimum bandwidth Port的支持，可以让Nova通过根据最小带宽的端口进行调度</li>
<li>增加了 Network Segment Range Management 功能，该功能可以让管理员对网络的段管理，比如VLAN ID，VXLAN的VNI进行更加灵活的管理</li>
<li>提升了批量创建端口的性能，这主要是为K8S对接Neutron的网络而改进的</li>
</ul>
<p>Train</p>
<ul>
<li>引进了一个新的API ： extraroute-atomic，可以原子化的对路由器的路由表进行更新，以防止多个客户端同时更新而引起的竞争问题</li>
<li>为ML2/OVS memchanism driver添加了Smart NIC的支持，可以创建出由智能网卡作为后端的Port</li>
<li>支持对Provider network的segmentation ID进行修改</li>
</ul>
<h3 id="Nova"><a href="#Nova" class="headerlink" title="Nova"></a>Nova</h3><p>Stein</p>
<ul>
<li>支持使用独立的Placement服务</li>
<li>在创建虚拟机的时候，可以指定volume_type，简化了在特定存储后端创建虚拟机的步骤，在这之前，需要先创建出指定volume type的volume，然后再从该volume创建虚拟机</li>
<li>用户可以用 quality-of-service minimum bandwidth 类型的端口创建虚拟机，该虚拟机会自动调度到该Port所在的计算节点</li>
<li>可配置单台虚拟机可以挂载的最多volume的数量，libvirt driver默认是最多挂载26个卷</li>
<li>现在可以通过placement api或者是nova配置文件来设置内存CPU的超配比</li>
<li>计算节点现在可以将自身的一些特征汇报给placement，在调度时，可以由flavor使用这些特征进行调度</li>
<li>热迁移的改进，在长时间热迁移没有完成的情况下，超过了超时时间，可以选择强制进行迁移，这会将虚拟机Pause，短时间内暂停虚拟机，强制迁移走</li>
<li>重构os-vif的代码，为网卡的offload给物理硬件提供了更加通用的框架</li>
</ul>
<p>Train</p>
<ul>
<li>支持为使用了 NUMA topology, pinned CPUs and/or huge pages等特性的虚拟机，进行热迁移</li>
<li>支持为使用SR-IOV Port的虚拟机提供热迁移</li>
<li>支持为挂载了 bandwidth-aware Quality of Service的Port进行冷迁移和resize</li>
<li>为nova-manage命令添加了更多的运维操作，比如归档已经删除的无用记录</li>
<li>提供了对持久化内存的支持，这对一些内存要求较高的应用提供了硬件层面的支持，比如HPC高性能计算，还有像redis, rocksdb这类内存型的数据库</li>
<li>支持 forbidden aggregates 功能，允许用户将一组特定的服务器用于特定的目的，不被其他虚拟机使用和调度</li>
<li>增强了对异构CPU服务器，进行热迁移时的功能，在cpu_mode设置为custom时，可以定义一组cpu_model，跟目的机器适配的，即可进行热迁移</li>
</ul>
<h3 id="Octavia"><a href="#Octavia" class="headerlink" title="Octavia"></a>Octavia</h3><p>Stein</p>
<ul>
<li>支持选择不同的flavor来创建负载均衡，以前不能选择，是固定的某个flavor</li>
<li>支持在haproxy和后端server之间进行加密传输</li>
<li>添加了一个管理员API，可以查看到每个amphora负载均衡的状态信息</li>
</ul>
<p>Train</p>
<ul>
<li>支持配置amphora虚拟机中服务日志的offloading，允许其将日志导出到别的地方</li>
<li>支持创建volume-backend的amphora虚拟机</li>
</ul>
<h3 id="Oslo"><a href="#Oslo" class="headerlink" title="Oslo"></a>Oslo</h3><p>oslo.config</p>
<ul>
<li>oslo.config一个比较大的改进是对后端配置引入了driver的机制，支持将配置存储在某个后端中，而不是限制在配置文件里，在Castellan项目中实现了一个oslo.config的driver，支持将一些明文的密码配置存储在Castellan中</li>
</ul>
<p>oslo.messaging</p>
<ul>
<li>在amqp&lt;=2.4.0，并且oslo.messaging配置了TLS功能，会导致消息队列不稳定，见<a target="_blank" rel="noopener" href="https://bugs.launchpad.net/oslo.messaging/+bug/1800957">bug 1800957</a>，amqp在2.4.1进行了修复，oslo.messaging现在依赖的最小版本的amqp是2.4.1</li>
</ul>
<h3 id="Placement"><a href="#Placement" class="headerlink" title="Placement"></a>Placement</h3><ul>
<li>Placement在这个release中独立出来，版本号为1.0.0，并且提供了一个文档，<a target="_blank" rel="noopener" href="https://docs.openstack.org/placement/latest/upgrade/to-stein.html">Upgrading from Nova to Placement</a>，为迁移升级提供指导，尤其是数据库的迁移，要由之前的nova_api数据库，迁移到placement独立的数据库中</li>
<li>在2.0.0版本，nova需要强制启用placement</li>
</ul>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><ul>
<li><a target="_blank" rel="noopener" href="https://governance.openstack.org/tc/goals/">https://governance.openstack.org/tc/goals/</a></li>
<li><a target="_blank" rel="noopener" href="https://releases.openstack.org/stein/highlights.html">https://releases.openstack.org/stein/highlights.html</a></li>
<li><a target="_blank" rel="noopener" href="https://releases.openstack.org/train/highlights.html">https://releases.openstack.org/train/highlights.html</a></li>
<li><a target="_blank" rel="noopener" href="https://specs.openstack.org/">https://specs.openstack.org/</a></li>
<li><a target="_blank" rel="noopener" href="https://releases.openstack.org/stein/index.html">https://releases.openstack.org/stein/index.html</a></li>
<li><a target="_blank" rel="noopener" href="https://releases.openstack.org/train/index.html">https://releases.openstack.org/train/index.html</a></li>
</ul>
<h2 id="英文版"><a href="#英文版" class="headerlink" title="英文版"></a>英文版</h2><p>cinder</p>
<ul>
<li>stein<ul>
<li>Added multiattach and deferred deletion support for the RBD driver.</li>
</ul>
</li>
<li>train<ul>
<li>Cinder now has upgrade checks that can be run to check for possible compatibility issues when upgrading to Train.</li>
<li>When uploading qcow2 images to Glance the data can now be compressed.<ul>
<li>Leverage compression accelerator</li>
</ul>
</li>
<li>Add volume re-image API<ul>
<li><a target="_blank" rel="noopener" href="https://specs.openstack.org/openstack/cinder-specs/specs/train/add-volume-re-image-api.html">https://specs.openstack.org/openstack/cinder-specs/specs/train/add-volume-re-image-api.html</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>glance</p>
<ul>
<li>rocky<ul>
<li>An implementation of multiple backend support, which allows operators to configure multiple stores and allows end users to direct image data to a specific store, is introduced as the EXPERIMENTAL Image Service API version 2.8</li>
</ul>
</li>
<li>train<ul>
<li>Glance multi-store feature has been deemed stable</li>
</ul>
</li>
</ul>
<p>ironic</p>
<ul>
<li>stein<ul>
<li>Adds additional interfaces for management of hardware including Redfish BIOS settings, explicit iPXE boot interface option, and additional hardware support.<ul>
<li>Promote iPXE to separate boot interface</li>
<li>Out of Band Inspection support for redfish hardware type</li>
</ul>
</li>
<li>Increased capabilities and options for operators including deployment templates, improved parallel conductor workers and disk erasure processes, deployed node protection and descriptions, and use of local HTTP(S) servers for serving images.<ul>
<li>Expose conductor information from API</li>
<li>Deploy Templates</li>
</ul>
</li>
<li>Smart NIC Networking</li>
<li>Allocation API<ul>
<li>Improved options for standalone users to request allocations of bare metal nodes and submit configuration data as opposed to pre-formed configuration drives. Additionally allows for ironic to be leveraged using JSON-RPC as opposed to an AMQP message bus.</li>
<li>For some long time standalone Ironic users have requested an ability to pick a node via API based on some criteria, and reserve it for deployment (== put instance_uuid) on it.</li>
<li>Given a resource class and, optionally, a list of required traits, return me an available bare metal node and set instance_uuid on it to make it as reserved.</li>
</ul>
</li>
</ul>
</li>
<li>train<ul>
<li>Basic support for building software RAID</li>
</ul>
</li>
</ul>
<p>keystone</p>
<ul>
<li>stein<ul>
<li>The limits API now supports domains in addition to projects, so quota for resources can be allocated to top-level domains and distributed among children projects.<ul>
<li>Domain Level Unified Limit Support</li>
</ul>
</li>
<li>JSON Web Tokens are added as a new token format alongside fernet tokens, enabling support for a internet-standard format. JSON Web Tokens are asymmetrically signed and so synchronizing private keys across keystone servers is no longer required with this token format.<ul>
<li>Add JSON Web Tokens as a Non-persistent Token Provider</li>
</ul>
</li>
<li>Multiple keystone APIs now use default reader, member, and admin roles instead of a catch-all role, which reduces the need for customized policies to create read-only access for certain users.</li>
</ul>
</li>
<li>train<ul>
<li>All keystone APIs now use the default reader, member, and admin roles in their default policies. This means that it is now possible to create a user with finer-grained access to keystone APIs than was previously possible with the default policies. For example, it is possible to create an “auditor” user that can only access keystone’s GET APIs. Please be aware that depending on the default and overridden policies of other OpenStack services, such a user may still be able to access creative or destructive APIs for other services.</li>
<li>Keystone roles, projects, and domains may now be made immutable, so that certain important resources like the default roles or service projects cannot be accidentally modified or deleted. This is managed through resource options on roles, projects, and domains. The keystone-manage bootstrap command now allows the deployer to opt into creating the default roles as immutable at deployment time, which will become the default behavior in the future. Roles that existed prior to running keystone-manage bootstrap can be made immutable via resource update.<ul>
<li>Immutable Resources</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>kolla</p>
<ul>
<li>stein<ul>
<li>Added an image and playbooks for the OpenStack Placement service, which has been extracted from Nova into a separate project.</li>
<li>Adds support for deploying the OpenStack Cyborg service. Cyborg is a service for managing hardware accelerators.</li>
<li>Adds support for a dedicated migration network. This is configured via the variables migration_interface and migration_interface_address.</li>
<li>Adds support for using a separate network for Octavia. This is configured via octavia_network_interface and octavia_network_interface_address.</li>
<li>Adds support for configuring the maximum files and processes limits in the nova_libvirt container, via the qemu_max_files and qemu_max_processes variables. The default values for these are 32768 and 131072 respectively. This is useful when Nova uses Ceph as a backend, since the default limit of 1024 is often not enough.</li>
<li>Implements Neutron rolling upgrade logic, applied for Neutron server, VPNaaS and FWaaS because only these projects have support for rolling upgrade database migration.</li>
<li>Implements Nova rolling upgrade logic.</li>
<li>Docker logs are no longer allowed to grow unbounded and have been limited to a fixed size per container. Two new variables have been added, docker_log_max_file and docker_log_max_size which default to 5 and 50MB respectively. This means that for each container, there should be no more than 250MB of Docker logs.</li>
</ul>
</li>
<li>train<ul>
<li>Introduced images and playbooks for Masakari, which supports instance High Availability, and Qinling, which provides Functions as a Service.</li>
<li>Added support for control plane communication via IPv6.</li>
<li>Adds a new kolla-ansible subcommand: deploy-containers. This action will only do the container comparison and deploy out new containers if that comparison detects a change is needed. This should be used to get updated container images, where no new config changes are need, deployed out quickly.</li>
<li>It is now possible to pass RABBITMQ_SERVER_ADDITIONAL_ERL_ARGS to RabbitMQ server’s Erlang VM via the newly introduced rabbitmq_server_additional_erl_args variable. See Kolla Ansible docs RabbitMQ section for details.</li>
<li>Adds support for configuring additional Docker volumes for Kolla containers. These are configured via <service_name>_extra_volumes.</li>
<li>Adds support for CentOS 8 as a host Operating System and base container image. This is the only major version of CentOS supported from the Ussuri release. The Train release supports both CentOS 7 and 8 hosts, and provides a route for migration.</li>
<li>Adds a new flag, docker_disable_default_network, which defaults to no. Docker is using 172.17.0.0/16 by default for bridge networking on docker0, and this might cause routing problems for operator networks. Setting this flag to yes will disable Docker’s bridge networking. This feature will be enabled by default from the Wallaby 12.0.0 release.</li>
</ul>
</li>
</ul>
<p>kuryr</p>
<ul>
<li>stein<ul>
<li>Added support for handling and reacting to Network Policies events from kubernetes, allowing Kuryr-Kubernetes to handle security group rules on the fly based on them.</li>
<li>Added support for K8s configured to use CRI-O, the Open Container Initiative-based implementation of Kubernetes Container Runtime Interface as container runtime.</li>
</ul>
</li>
<li>train<ul>
<li>Stabilization of the support for Kubernetes Network Policy.</li>
<li>Kuryr CNI plugin is now rewriten to golang to make deploying it easier.</li>
</ul>
</li>
</ul>
<p>neutron</p>
<ul>
<li>stein<ul>
<li>New framework for neutron-status upgrade check command is added. This framework allows adding various checks which can be run before a Neutron upgrade to ensure if the upgrade can be performed safely. Stadium and 3rd party projects can register their own checks to this new neutron-status CLI tool using entrypoints in neutron.status.upgrade.checks namespace.</li>
<li>Support for strict minimum bandwidth based scheduling. With this feature, Nova instances can be scheduled to compute hosts that will honor the minimum bandwidth requirements of the instance as defined by QoS policies of its ports.<ul>
<li><a target="_blank" rel="noopener" href="https://docs.openstack.org/neutron/latest/admin/config-qos-min-bw.html">https://docs.openstack.org/neutron/latest/admin/config-qos-min-bw.html</a></li>
</ul>
</li>
<li>Network Segment Range Management. This features enables cloud administrators to manage network segment ranges dynamically via a new API extension, as opposed to the previous approach of editing configuration files. This feature targets StarlingX and edge use cases, where ease of of management is paramount.</li>
<li>Speed up Neutron port bulk creation. The targets are containers / k8s use cases, where ports are created in groups.</li>
</ul>
</li>
<li>train<ul>
<li>A new API, extraroute-atomic, has been implemented for Neutron routers. This extension enables users to add or delete individual entries to a router routing table, instead of having to update the entire table as one whole. The new API extension extraroute-atomic introduces two new member actions on routers to add/remove routes atomically on the server side. The use of these new member actions (PUT /v2.0/routers/ROUTER-ID/add_extraroutes and PUT /v2.0/routers/ROUTER-ID/remove_extraroutes) is always preferred to the old way (PUT /v2.0/routers/ROUTER-ID) when multiple clients edit the extra routes of a router since the old way is prone to race conditions between concurrent clients and therefore to possible lost updates.</li>
<li>Support for L3 conntrack helpers has been added. Users can now configure conntrack helper target rules to be set for a router. This is accomplished by associating a conntrack_helper sub-resource to a router.<ul>
<li><a target="_blank" rel="noopener" href="https://klose911.github.io/html/iptables/state.html">https://klose911.github.io/html/iptables/state.html</a></li>
</ul>
</li>
<li>Add Support for Smart NIC in ML2/OVS mechanism driver, by extending the Neutron OVS mechanism driver and Neutron OVS Agent to bind the Neutron port for the baremetal host with Smart NIC.</li>
<li>The segmentation ID of a provider network can be now modified, even with OVS ports bound. Note that, during this process, the traffic of the bound ports tagged with the former segmentation ID (external VLAN) will be mapped to the new one. This can provoke a traffic disruption while the external network VLAN is migrated to the new tag.<ul>
<li>Change the segment ID of a VLAN provider network</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>nova</p>
<ul>
<li>stein<ul>
<li>It is now possible to run Nova with version 1.0.0 of the recently extracted placement service, hosted from its own repository. Note that install/upgrade of an extracted placement service is not yet fully implemented in all deployment tools. Operators should check with their particular deployment tool for support before proceeding. See the placement install and upgrade documentation for more details. In Stein, operators may choose to continue to run with the integrated placement service from the Nova repository, but should begin planning a migration to the extracted placement service by Train, as the removal of the integrated placement code from Nova is planned for the Train release.</li>
<li>Users can now specify a volume type when creating servers.<ul>
<li>Boot instance specific storage backend</li>
<li>Currently, when creating a new boot-from-volume instance, the user can only control the type of the volume by pre-creating a bootable image-backed volume with the desired type in cinder and providing it to nova during the boot process. When the user wants to boot the instance on the specified backend, this is not friendly to the user when there are multiple storage backends in the environment.</li>
<li>As a user, I would like to specify volume type to my instances when I boot them, especially when I am doing bulk boot. The “bulk boot” means creating multiple servers in separate requests but at the same time.</li>
</ul>
</li>
<li>Users can now create servers with Neutron ports that have quality-of-service minimum bandwidth rules.<ul>
<li>Network Bandwidth resource provider</li>
</ul>
</li>
<li>Configure maximum number of volumes to attach<ul>
<li>Currently, there is a limitation in the libvirt driver restricting the maximum number of volumes to attach to a single instance to 26.</li>
</ul>
</li>
<li>Operators can now set overcommit allocation ratios using Nova configuration files or the placement API.<ul>
<li>Default allocation ratio configuration</li>
</ul>
</li>
<li>Compute driver capabilities are now automatically exposed as traits in the placement API so they can be used for scheduling via flavor extra specs and/or image properties.<ul>
<li><a target="_blank" rel="noopener" href="https://docs.openstack.org/nova/latest/admin/scheduling.html#compute-capabilities-as-traits">https://docs.openstack.org/nova/latest/admin/scheduling.html#compute-capabilities-as-traits</a></li>
</ul>
</li>
<li>Live-Migration force after timeout</li>
<li>Generic os-vif datapath offloads<ul>
<li>The existing method in os-vif is to pass datapath offload metadata via a VIFPortProfileOVSRepresentor port profile object. This is currently used by the ovs reference plugin and the external agilio_ovs plugin. This spec proposes a refactor of the interface to support more VIF types and offload modes.</li>
</ul>
</li>
</ul>
</li>
<li>train<ul>
<li>Live migration support for servers with a NUMA topology, pinned CPUs and/or huge pages, when using the libvirt compute driver.<ul>
<li>NUMA-aware live migration</li>
</ul>
</li>
<li>Live migration support for servers with SR-IOV ports attached when using the libvirt compute driver.</li>
<li>Support for cold migrating and resizing servers with bandwidth-aware Quality of Service ports attached. Cold migration and resize are now supported for servers with neutron ports having resource requests. E.g. ports that have QoS minimum bandwidth rules attached. </li>
<li>Improved operational tooling for things like archiving the database and healing instance resource allocations in Placement.<ul>
<li>nova-manage db archive_deleted_rows </li>
</ul>
</li>
<li>Support for VPMEM (Virtual Persistent Memory) when using the libvirt compute driver. This provides data persistence across power cycles at a lower cost and with much larger capacities than DRAM, especially benefitting HPC and memory databases such as redis, rocksdb, oracle, SAP HANA, and Aerospike.<ul>
<li>support virtual persistent memory</li>
</ul>
</li>
<li>Train is the first cycle where Placement is available solely from its own project and must be installed separately from Nova.</li>
<li>Added support for forbidden aggregates which allows groups of resource providers to only be used for specific purposes, such as reserving a group of compute nodes for licensed workloads.<ul>
<li>Support filtering of allocation_candidates by forbidden aggregates</li>
<li><a target="_blank" rel="noopener" href="https://docs.openstack.org/nova/latest/reference/isolate-aggregates.html">https://docs.openstack.org/nova/latest/reference/isolate-aggregates.html</a></li>
</ul>
</li>
<li>Select CPU model from a list of CPU models</li>
</ul>
</li>
</ul>
<p>octavia</p>
<ul>
<li>stein<ul>
<li>Octavia now supports load balancer “flavors”. This allows an operator to create custom load balancer “flavors” that users can select when creating a load balancer.</li>
<li>Octavia now supports backend re-encryption of connections to member servers. Backend re-encryption allows users to configure pools to initiate TLS connections to the backend member servers. This enables load balancers to authenticate and encrypt connections from the load balancer to the backend member server.</li>
<li>Added new tool octavia-status upgrade check. This framework allows adding various checks which can be run before a Octavia upgrade to ensure if the upgrade can be performed safely.</li>
<li>Adds an administrator API to access per-amphora statistics</li>
</ul>
</li>
<li>train<ul>
<li>Octavia now supports Amphora log offloading. Operators can define syslog targets for the Amphora administrative logs and for the tenant load balancer flow logs.</li>
<li>Allow creation of volume based amphora. Many deploy production use volume based instances because of more flexibility. Octavia will create volume and attach this to the amphora.</li>
</ul>
</li>
</ul>
<p>oslo</p>
<ul>
<li>oslo.config<ul>
<li>Added a Castellan config driver that allows secrets to be moved from on-disk config files to any Castellan-compatible keystore. This driver lives in the Castellan project, so Castellan must be installed in order to use it.<ul>
<li>Various regulations and best practices say that passwords and other secret values should not be stored in plain text in configuration files. There are “secret store” services to manage values that should be kept secure. Castellan provides an abstraction API for accessing those services. Castellan also depends on oslo.config, which means oslo.config cannot use castellan directly.</li>
<li><a target="_blank" rel="noopener" href="https://specs.openstack.org/openstack/oslo-specs/specs/queens/oslo-config-drivers.html">https://specs.openstack.org/openstack/oslo-specs/specs/queens/oslo-config-drivers.html</a></li>
</ul>
</li>
</ul>
</li>
<li>oslo.messaging<ul>
<li>In combination with amqp&lt;=2.4.0, oslo.messaging was unreliable when configured with TLS (as is generally recommended). Users would see frequent errors such as this: MessagingTimeout: Timed out waiting for a reply to message ID ae039d1695984addbfaaef032ce4fda3 Such issues would typically lead to downstream service timeouts, with no recourse available other than disabling TLS altogether (see <a target="_blank" rel="noopener" href="https://docs.openstack.org/placement/latest/upgrade/to-stein.html">bug 1800957</a>). The underlying issue is fixed in amqp version 2.4.1, which is now the minimum version that oslo.messaging requires.</li>
</ul>
</li>
</ul>
<p>placement</p>
<ul>
<li>stein<ul>
<li>The 1.0.0 release of Placement is the first release where the Placement code is hosted in its own repository and managed as its own OpenStack project. Because of this, the majority of changes are not user-facing. There are a small number of new features (including microversion 1.31) and bug fixes, listed below.</li>
<li>A new document, <a target="_blank" rel="noopener" href="https://docs.openstack.org/placement/latest/upgrade/to-stein.html">Upgrading from Nova to Placement</a>, has been created. It explains the steps required to upgrade to extracted Placement from Nova and to migrate data from the nova_api database to the placement_database.</li>
</ul>
</li>
<li>train<ul>
<li>The 2.0.0 release of placement is the first release where placement is available solely from its own project and must be installed separately from nova. If the extracted placement is not already in use, prior to upgrading to Train, the Stein version of placement must be installed. See Upgrading from Nova to Placement for details.</li>
</ul>
</li>
</ul>
</div><div class="article-licensing box"><div class="licensing-title"><p>OpenStack Stein-Train版本新功能介绍</p><p><a href="https://hackerain.me/2021/11/19/openstack/openstack_rst_highlight.html">https://hackerain.me/2021/11/19/openstack/openstack_rst_highlight.html</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>hackerain</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2021-11-19</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-03-11</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/openstack/">openstack</a></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2021/11/19/openstack/openstack_uvw_highlight.html"><i class="level-item fas fa-chevron-left"></i><span class="level-item">OpenStack Ussuri-Victoria-Wallaby版本新功能介绍</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2021/10/16/kubernetes/kube-kubelet-csi.html"><span class="level-item">Kubernetes Kubelet CSI 机制解析</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/assets/avatar.jpg" alt="开心BOY"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">开心BOY</p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">41</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">0</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">7</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="/about" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/hackerain"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="知识星球" href="https://t.zsxq.com/0bWmBFDpu"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#社区目标"><span class="level-left"><span class="level-item">1</span><span class="level-item">社区目标</span></span></a></li><li><a class="level is-mobile" href="#特性概述"><span class="level-left"><span class="level-item">2</span><span class="level-item">特性概述</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Cinder"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">Cinder</span></span></a></li><li><a class="level is-mobile" href="#Glance"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">Glance</span></span></a></li><li><a class="level is-mobile" href="#Ironic"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">Ironic</span></span></a></li><li><a class="level is-mobile" href="#Keystone"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">Keystone</span></span></a></li><li><a class="level is-mobile" href="#Kolla"><span class="level-left"><span class="level-item">2.5</span><span class="level-item">Kolla</span></span></a></li><li><a class="level is-mobile" href="#Kuryr"><span class="level-left"><span class="level-item">2.6</span><span class="level-item">Kuryr</span></span></a></li><li><a class="level is-mobile" href="#Neutron"><span class="level-left"><span class="level-item">2.7</span><span class="level-item">Neutron</span></span></a></li><li><a class="level is-mobile" href="#Nova"><span class="level-left"><span class="level-item">2.8</span><span class="level-item">Nova</span></span></a></li><li><a class="level is-mobile" href="#Octavia"><span class="level-left"><span class="level-item">2.9</span><span class="level-item">Octavia</span></span></a></li><li><a class="level is-mobile" href="#Oslo"><span class="level-left"><span class="level-item">2.10</span><span class="level-item">Oslo</span></span></a></li><li><a class="level is-mobile" href="#Placement"><span class="level-left"><span class="level-item">2.11</span><span class="level-item">Placement</span></span></a></li></ul></li><li><a class="level is-mobile" href="#参考资料"><span class="level-left"><span class="level-item">3</span><span class="level-item">参考资料</span></span></a></li><li><a class="level is-mobile" href="#英文版"><span class="level-left"><span class="level-item">4</span><span class="level-item">英文版</span></span></a></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><!--!--><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-09-26T00:00:00.000Z">2022-09-26</time></p><p class="title"><a href="/2022/09/26/elasticsearch/elasticsearch_large_text_field.html">Elasticsearch大文本字段(large text field)优化方案</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2022-08-07T10:52:55.000Z">2022-08-07</time></p><p class="title"><a href="/2022/08/07/umi/umi.html">UMI框架解析</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-11-19T22:12:55.000Z">2021-11-19</time></p><p class="title"><a href="/2021/11/19/openstack/openstack_uvw_highlight.html">OpenStack Ussuri-Victoria-Wallaby版本新功能介绍</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-11-19T22:03:55.000Z">2021-11-19</time></p><p class="title"><a href="/2021/11/19/openstack/openstack_rst_highlight.html">OpenStack Stein-Train版本新功能介绍</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-10-16T00:00:00.000Z">2021-10-16</time></p><p class="title"><a href="/2021/10/16/kubernetes/kube-kubelet-csi.html">Kubernetes Kubelet CSI 机制解析</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2022/"><span class="level-start"><span class="level-item">2022</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/"><span class="level-start"><span class="level-item">2021</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/"><span class="level-start"><span class="level-item">2020</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/"><span class="level-start"><span class="level-item">2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/archives/2018/"><span class="level-start"><span class="level-item">2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2017/"><span class="level-start"><span class="level-item">2017</span></span><span class="level-end"><span class="level-item tag">12</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/ceph/"><span class="tag">ceph</span><span class="tag">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/elasticsearch/"><span class="tag">elasticsearch</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/kubernetes/"><span class="tag">kubernetes</span><span class="tag">16</span></a></div><div class="control"><a class="tags has-addons" href="/tags/openstack/"><span class="tag">openstack</span><span class="tag">19</span></a></div><div class="control"><a class="tags has-addons" href="/tags/operations/"><span class="tag">operations</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python/"><span class="tag">python</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/umi/"><span class="tag">umi</span><span class="tag">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/assets/logo.jpg" alt="开心BOY" height="28"></a><p class="is-size-7"><span>&copy; 2023 hackerain</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">© 2023</p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/hackerain"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>